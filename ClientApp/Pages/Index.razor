@page "/"

@inject IHttpClientFactory ClientFactory

<PageTitle>Главная страница111</PageTitle>

<Switch @bind-Checked="switchValue" OnChange="OnSwitchChange"/>


@code{
	bool switchValue { get; set; } = true;
	
	protected override async Task OnInitializedAsync()
	{
	
	
	
		
	}

	private async Task OnSwitchChange()
	{
		var request = new HttpRequestMessage(HttpMethod.Post,
			 Settings.Address + "/W/UpdateModuleStatus");
		request.Content = new StringContent("{\"user\":\"Me\",\"password\":\"123\",\"command\":{\"pin\":\"2\",\"value\":\"" + (switchValue ? "1": "0") + "\"}}");
		request.Headers.Add("Access-Control-Allow-Origin", "http://194.58.107.109:8080");
		request.Headers.Add("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS");
		
		
		var client = ClientFactory.CreateClient();
		var response = await client.SendAsync(request);
	}

}