@page "/"

@inject IHttpClientFactory ClientFactory

<PageTitle>Главная страница</PageTitle>

<Switch @bind-Checked="switchValue" OnChange="OnSwitchChange"/>


@code{
	bool switchValue { get; set; }
	
	protected override async Task OnInitializedAsync()
	{
		
	}

	private async Task OnSwitchChange()
	{
		var request = new HttpRequestMessage(HttpMethod.Post,
			"http://194.58.107.109:8080/W/UpdateModuleStatus");
		request.Content = new StringContent("{\"user\":\"Me\",\"password\":\"123\",\"command\":{\"pin\":\"2\",\"value\":\"" + (switchValue ? "1": "0") + "\"}}");

		var client = ClientFactory.CreateClient();
		var response = await client.SendAsync(request);
	}

}